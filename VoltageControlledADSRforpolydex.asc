Version 4
SHEET 1 1396 680
WIRE 960 -96 800 -96
WIRE 960 -80 960 -96
WIRE 896 0 896 -32
WIRE 896 0 848 0
WIRE 912 0 896 0
WIRE 960 16 960 0
WIRE 880 32 720 32
WIRE 960 80 960 16
WIRE 528 112 416 112
WIRE 1104 128 1104 80
WIRE 720 144 720 32
WIRE 752 144 720 144
WIRE 1184 144 1184 80
WIRE 1184 144 1168 144
WIRE 320 160 160 160
WIRE 848 160 848 0
WIRE 848 160 816 160
WIRE 880 160 880 32
WIRE 960 160 880 160
WIRE 1024 160 960 160
WIRE 1104 160 1024 160
WIRE 672 176 624 176
WIRE 752 176 720 176
WIRE 528 224 528 112
WIRE 960 240 960 224
WIRE -96 256 -144 256
WIRE 720 272 720 176
WIRE -96 288 -224 288
WIRE 320 288 320 160
WIRE -224 304 -224 288
WIRE -208 304 -224 304
WIRE 464 304 384 304
WIRE 560 304 528 304
WIRE 960 304 960 240
WIRE 48 320 48 272
WIRE 112 320 48 320
WIRE 304 320 288 320
WIRE 320 320 304 320
WIRE 560 320 560 304
WIRE 240 368 240 320
WIRE 624 368 624 176
WIRE 624 368 576 368
WIRE 816 384 816 160
WIRE 896 384 896 352
WIRE 896 384 816 384
WIRE 912 384 896 384
WIRE 960 400 960 352
WIRE 960 416 960 400
WIRE 960 416 816 416
WIRE 112 544 112 320
WIRE 480 544 480 368
WIRE 480 544 112 544
FLAG 144 96 0
FLAG 48 96 0
FLAG 48 16 V+
IOPIN 48 16 BiDir
FLAG 144 16 V-
IOPIN 144 16 BiDir
FLAG 352 272 V+
IOPIN 352 272 BiDir
FLAG 352 336 V-
IOPIN 352 336 BiDir
FLAG 784 128 V+
IOPIN 784 128 BiDir
FLAG 784 192 V-
IOPIN 784 192 BiDir
FLAG 320 384 0
FLAG 288 400 0
FLAG 176 384 0
FLAG 240 272 V+
IOPIN 240 272 BiDir
FLAG 240 448 V-
IOPIN 240 448 BiDir
FLAG 160 240 0
FLAG 416 192 0
FLAG 576 448 0
FLAG 1024 224 0
FLAG 800 -16 0
FLAG 816 496 0
FLAG 752 256 0
FLAG 1136 112 V+
IOPIN 1136 112 BiDir
FLAG 1136 176 V-
IOPIN 1136 176 BiDir
FLAG 1024 80 0
FLAG -224 384 0
FLAG 176 240 0
FLAG -64 240 V+
IOPIN -64 240 BiDir
FLAG -96 368 0
FLAG -144 336 0
FLAG -144 176 V+
IOPIN -144 176 BiDir
FLAG -64 304 0
SYMBOL voltage 48 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 9.5
SYMBOL voltage 144 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -9.5
SYMBOL Opamps\\UniversalOpamp2 352 304 R0
SYMATTR InstName U1
SYMBOL Opamps\\UniversalOpamp2 784 160 R0
SYMATTR InstName U3
SYMBOL voltage -224 288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 5 0.05 0.00001 0.00001 0.8)
SYMBOL cap 176 304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL cap 336 384 R180
WINDOW 0 24 56 Left 2
WINDOW 3 2 -82 Left 2
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL res 272 304 R0
SYMATTR InstName R1
SYMATTR Value 2200k
SYMBOL diode 192 384 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL npn 176 272 R0
SYMATTR InstName Q1
SYMBOL diode 240 336 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 224 352 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL voltage 160 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 3
SYMBOL voltage 416 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 6
SYMBOL res 512 208 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 560 352 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL diode 464 320 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL cap 1008 160 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL res 944 144 R0
SYMATTR InstName R5
SYMATTR Value 10000k
SYMBOL res 944 64 R0
SYMATTR InstName R6
SYMATTR Value 5600k
SYMBOL voltage 816 400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value {-9.1+Va}
SYMBOL voltage 800 -112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value {Va}
SYMBOL res 768 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 220k
SYMBOL npn 896 -80 R0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL pnp 896 400 M180
SYMATTR InstName Q4
SYMATTR Value 2N3906
SYMBOL res 736 160 R0
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL Opamps\\UniversalOpamp2 1136 144 R0
SYMATTR InstName U2
SYMBOL res 1120 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res 1200 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 20k
SYMBOL res 160 224 R0
SYMATTR InstName R12
SYMATTR Value 100k
SYMBOL Opamps\\UniversalOpamp2 -64 272 R0
SYMATTR InstName U4
SYMBOL res 64 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 3k3
SYMBOL res -160 240 R0
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL res -160 160 R0
SYMATTR InstName R14
SYMATTR Value 100k
SYMBOL diode -96 272 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL nmos 480 320 M90
SYMATTR InstName M1
SYMATTR Value 2N7002
TEXT -24 536 Left 2 !.tran 2
TEXT -424 160 Left 2 ;actually part of the cd40109 next to the attiny
TEXT 560 -152 Left 2 !.step param Va 0 9 1
